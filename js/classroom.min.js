!function(t){function i(){this.ct_scroll=new IScroll("#content"),this.at_scroll=new IScroll("#activity"),this.has=!0,this.bindEvent()}i.prototype={bindEvent:function(){function i(i){t("#activity .wrap").on("tap","li",function(){var i=t(this).data("location"),a=t(this).parents("section");s(a),"#Top"==i?(t("#footer").show(),t("#footer .ft_Top").show().siblings().hide()):"#Center"==i?o("问题征集"):"#Bottom"==i&&(o('幼师宝典"伙伴计划"详情介绍'),t("#footer .ft_Top").show().siblings().hide()),t(i).css("left",0).siblings().css("left","100%")})}function s(i){t("#back").on("tap",function(){t("#content").css("left",0).siblings().css("left","100%"),t("#header").find("h1").text("幼师讲堂"),t(this).hide(),t("#footer").show(),t("#footer .ft_a").show().siblings().hide()})}function o(i){t("#header").find("h1").text(i)}function a(t){return"start"==t?'<p class="p_status">【尚未开始】</p>':"<p>【已结束】</p>"}var n=this;t.getJSON("classroom_list.json",function(i){var s="";t.each(i,function(t,i){s+="<dl data-list="+t+"><dt><img src="+i.src+' alt="" /></dt><dd><h3 class="tit">'+i.tit+"</h3>"+a(i.status)+"<span>"+i.time+"</span></dd></dl>"}),t("#content .wrap").html(s),n.ct_scroll.refresh()}),t("#content .wrap").on("swipeUp",function(){var i=Math.abs(t(this).position().top),s=t(this).parents().height(),o=t(this).height(),a="";o-i<s&&n.has&&(a=t("<div class='more'>没有更多了</div>"),t(this).append(a),a.css({height:"0.8rem","text-align":"center","line-height":"0.8rem"}),n.ct_scroll.refresh(),n.has=!1)}),t("#content div").on("tap","dl",function(){var a=t(this).parents("section"),e=t(this).find(".tit").text(),l=t(this).data("list"),c=t(this).find("p").hasClass("p_status");t("#activity").css("left",0).siblings().css("left","100%"),t("#back").show(),o(e),s(a),t.ajax({url:"classroom_list.json",type:"get",dataType:"json",success:function(s){var o=s[l].activity,a="";c?(t("#footer .ft_btn").show().siblings().hide(),a='<ul><li data-location="#Top"><img src='+o.top.src+' alt="" /></li><li data-location="#Center"><img src='+o.center.src+' alt="" /></li><li data-location="#Bottom"><img src='+o.bottom.src+' alt="" /></li></ul><div class="a_start"><h2>开课时间</h2><ol><li>'+o.date+"</li><li>"+o.time+"</li></ol></div>"):(t("#footer").hide(),a='<ul><li data-location="#Top"><img src='+o.top.src+' alt="" /></li><li data-location="#Center"><img src='+o.center.src+' alt="" /></li><li data-location="#Bottom"><img src='+o.bottom.src+' alt="" /></li></ul><div class="a_over"></div>'),t("#activity .wrap").html(a),n.at_scroll.refresh(),i(o)},error:function(){alert("请求失败！")}})})}};new i}(Zepto);